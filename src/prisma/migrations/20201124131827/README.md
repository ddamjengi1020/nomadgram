# Migration `20201124131827`

This migration has been generated by ddamjengi1020 at 11/24/2020, 10:18:27 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Message" DROP CONSTRAINT "Message_roomId_fkey"

ALTER TABLE "public"."_RoomToUser" DROP CONSTRAINT "_RoomToUser_A_fkey"

ALTER TABLE "public"."Comment" DROP CONSTRAINT "Comment_pkey",
ALTER COLUMN "id" SET DATA TYPE text ,
ALTER COLUMN "id" DROP DEFAULT,
ADD PRIMARY KEY ("id");
DROP SEQUENCE "Comment_id_seq"

ALTER TABLE "public"."File" DROP CONSTRAINT "File_pkey",
ALTER COLUMN "id" SET DATA TYPE text ,
ALTER COLUMN "id" DROP DEFAULT,
ADD PRIMARY KEY ("id");
DROP SEQUENCE "File_id_seq"

ALTER TABLE "public"."Message" ALTER COLUMN "roomId" SET DATA TYPE text 

ALTER TABLE "public"."Room" DROP CONSTRAINT "Room_pkey",
ALTER COLUMN "id" SET DATA TYPE text ,
ALTER COLUMN "id" DROP DEFAULT,
ADD PRIMARY KEY ("id");
DROP SEQUENCE "Room_id_seq"

ALTER TABLE "public"."_RoomToUser" ALTER COLUMN "A" SET DATA TYPE text 

ALTER TABLE "public"."Message" ADD FOREIGN KEY ("roomId")REFERENCES "public"."Room"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_RoomToUser" ADD FOREIGN KEY ("A")REFERENCES "public"."Room"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201121151927-whatever..20201124131827
--- datamodel.dml
+++ datamodel.dml
@@ -4,9 +4,9 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -49,25 +49,25 @@
   postId String
 }
 model Comment {
-  id     Int @id @default(autoincrement())
+  id     String @id @default(uuid())
   text   String
   user   User @relation(fields: [userId], references:[id])
   userId String
   post   Post @relation(fields: [postId], references: [id])
   postId String
 }
 model File {
-  id     Int @id @default(autoincrement())
+  id     String @id @default(uuid())
   url    String
   post   Post @relation(fields: [postId], references: [id])
   postId String
 }
 model Room {
-    id           Int @id @default(autoincrement())
+    id           String @id @default(uuid())
     participants User[] @relation(references: [id])
     messages     Message[]
 }
@@ -78,6 +78,6 @@
     fromUserId String
     to     User @relation("to", fields: [toUserId], references: [id])
     toUserId String
     room   Room @relation(fields: [roomId], references:[id])
-    roomId Int
+    roomId String
 }
```


