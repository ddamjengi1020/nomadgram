# Migration `20201121151927-whatever`

This migration has been generated by ddamjengi1020 at 11/22/2020, 12:19:28 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Comment" DROP CONSTRAINT "Comment_postId_fkey"

ALTER TABLE "public"."File" DROP CONSTRAINT "File_postId_fkey"

ALTER TABLE "public"."Like" DROP CONSTRAINT "Like_postId_fkey"

ALTER TABLE "public"."Comment" ALTER COLUMN "postId" SET DATA TYPE text 

ALTER TABLE "public"."File" ALTER COLUMN "postId" SET DATA TYPE text 

ALTER TABLE "public"."Like" DROP CONSTRAINT "Like_pkey",
ALTER COLUMN "id" SET DATA TYPE text ,
ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "postId" SET DATA TYPE text ,
ADD PRIMARY KEY ("id");
DROP SEQUENCE "Like_id_seq"

ALTER TABLE "public"."Post" DROP CONSTRAINT "Post_pkey",
ALTER COLUMN "id" SET DATA TYPE text ,
ALTER COLUMN "id" DROP DEFAULT,
ADD PRIMARY KEY ("id");
DROP SEQUENCE "Post_id_seq"

ALTER TABLE "public"."Comment" ADD FOREIGN KEY ("postId")REFERENCES "public"."Post"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."File" ADD FOREIGN KEY ("postId")REFERENCES "public"."Post"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Like" ADD FOREIGN KEY ("postId")REFERENCES "public"."Post"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201020031850..20201121151927-whatever
--- datamodel.dml
+++ datamodel.dml
@@ -4,9 +4,9 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -30,9 +30,9 @@
   loginSecret String?
 }
 model Post {
-  id       Int @id @default(autoincrement())
+  id       String @id @default(uuid())
   location String
   caption  String
   user     User @relation(fields: [userId], references: [id])
   userId   String
@@ -41,29 +41,29 @@
   files    File[] 
 }
 model Like {
-  id     Int @id @default(autoincrement())
+  id     String @id @default(uuid())
   user   User @relation(fields: [userId], references: [id])
   userId String
   post   Post @relation(fields: [postId], references: [id])
-  postId Int
+  postId String
 }
 model Comment {
   id     Int @id @default(autoincrement())
   text   String
   user   User @relation(fields: [userId], references:[id])
   userId String
   post   Post @relation(fields: [postId], references: [id])
-  postId Int
+  postId String
 }
 model File {
   id     Int @id @default(autoincrement())
   url    String
   post   Post @relation(fields: [postId], references: [id])
-  postId Int
+  postId String
 }
 model Room {
     id           Int @id @default(autoincrement())
```


